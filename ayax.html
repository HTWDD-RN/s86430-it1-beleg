<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="de" lang="de">
  <head>
    <meta charset="UTF-8">
    <title>HTML mit Java-Code praktizieren</title>
    <link rel="stylesheet" href="prak1.css">
  </head>
  <body> 
    <header>Praktikumsversuch AJAX
    </header>
    <main>
        <article id="absatz">
        <p><a href="javascript:sendXhr()"></a></p>
        </article>
        <button class="mybutton" id="prakbut" onclick="javascript:sendXhr()">Enfügen</button>

        <script type="text/javascript">
            function getXhr() { // API für asynchrone Aufrufe
                if (window.XMLHttpRequest) {
                  var xhr = new XMLHttpRequest();
                  return xhr;
                } 
                else return false;
            }
            function sendXhr() {
                xhr.onreadystatechange = xhrHandler;
                xhr.open('GET','https://www.informatik.htw-dresden.de/~s86430/ajax/Hallo.txt');
                xhr.send(null);
                console.debug("Request send");
            }
            function xhrHandler() {
                console.log( "Status: " + xhr.readyState );
                if (xhr.readyState != 4) { return; }
                console.log( "Status: " + xhr.readyState + " " + xhr.status);
                if (xhr.status == 200) {
                document.getElementById("absatz").innerHTML = xhr.responseText;
                   } 
               }
            var xhr = getXhr();
        </script>
    </main>  
  </body>
  <footer>
  </footer>
</html>